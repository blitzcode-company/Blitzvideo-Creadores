<app-header></app-header>
<div class="containerHome">
  <!-- TU SIDEBAR COLLAPSIBLE -->
  <div class="sidebar-container">
    <div class="sidebar" *ngIf="canalNombre">
      <div class="profile-section">
        <img *ngIf="!usuario?.foto" class="fotoPerfilDefault" src="assets/images/user.png" alt="Perfil">
        <img *ngIf="usuario?.foto" class="fotoPerfil" [src]="usuario.foto" alt="Perfil">
        <h1 class="channel-name">{{ canalNombre }}</h1>
      </div>
      <hr class="lineaSideBar">
      <nav class="menu-nav">
        <a class="menu-item active" routerLink="/misVideos">
          <mat-icon>video_library</mat-icon>
          <span>Mis videos</span>
        </a>
        <a class="menu-item" routerLink="/subirVideo">
          <mat-icon>cloud_upload</mat-icon>
          <span>Subir video</span>
        </a>
        <a class="menu-item" routerLink="/crearStream">
          <mat-icon>live_tv</mat-icon>
          <span>Crear stream</span>
        </a>
      </nav>
    </div>
  </div>

  <!-- GRID VIDEOS YOUTUBE -->
  <div class="content-wrapper">
    <div class="videos-container">
      <!-- NO VIDEOS -->
      <div *ngIf="videos.length === 0" class="no-videos">
        <mat-icon>video_library</mat-icon>
        <h2>No tienes videos subidos</h2>
        <p>Â¡Sube tu primer video!</p>
        <a mat-raised-button color="primary" routerLink="/subirVideo">
          <mat-icon>cloud_upload</mat-icon>
          Subir video
        </a>
      </div>

      <!-- GRID VIDEOS -->
      <div class="videos-grid" *ngIf="videos.length > 0">
        <div class="video-card" *ngFor="let video of videos">
          <a [href]="serverIp + '3001/video/' + video.id" class="video-link">
            <div class="thumbnail-container">
              <img class="thumbnail" [src]="video.miniatura" (error)="onImageError($event)" [alt]="video.titulo">
              <div class="video-duration">{{ video.duracion || '3:45' }}</div>
            </div>
            <div class="video-info">
              <h3 class="video-title">{{ video.titulo }}</h3>
              <div class="video-meta">
                <span class="views">{{ video.visitas_count }} vistas</span>
                <span class="date">{{ video.created_at | tiempo }}</span>
              </div>
            </div>
          </a>
          
          <!-- BOTONES MODERNOS -->
          <div class="video-actions">
            <button mat-icon-button color="primary" [routerLink]="['/editarVideo', video.id]">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="eliminarVideo(video.id); $event.preventDefault()">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- NO ACCESS -->
<div *ngIf="!canalNombre" class="no-access-youtube">
  <mat-icon>lock</mat-icon>
  <h2>No tienes canal</h2>
  <p>Crea un canal para ver tus videos</p>
  <a mat-button [routerLink]="['/crearCanal']">Crear canal</a>
</div>